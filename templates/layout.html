<!DOCTYPE html>

<html lang="en">

    <head>

        <!-- Specifies the character set for the document is UTF-8 -->
        <meta charset="utf-8">
        
        <!-- Ensures proper rendering and touch zooming on mobile devices -->  
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <!-- Load Tailwind CSS from CDN for styling -->        
        <script src="https://cdn.tailwindcss.com"></script>

        <!-- Favicon for the webpage -->  
        <link href="/static/passport.ico" rel="icon" type="image/x-icon">  

        <link href="/static/styles.css" rel="stylesheet">

        <title>Final project: {% block title %}{% endblock %}</title>
        
        {% block extra_head %}{% endblock %}
        
    </head>

    <!-- Tailwind's "antialiased" for smoother fonts -->
    <body class="antialiased min-h-screen flex flex-col app-background">

        <!-- Navbar built with Tailwind Flexbox -->
        <nav class="bg-[#BAC5B3] shadow-md p-4 sticky top-0 z-50">
            <div class="container mx-auto flex justify-between items-center">
                
                <!-- Logo/Brand -->
                <a class="text-xl font-bold tracking-tight text-gray-900 hover:text-gray-700" href="/">
                    <span class="text-[#885C45]">FICTIONAL PASSPORT</span>
                </a>
                
                <!-- Navigation Links -->
                <div class="flex space-x-6 text-sm font-medium">
                    {% if session["user_id"] %}
                        
                        <!-- Logged In Links -->
                        <a class="text-gray-600 hover:text-[#6daba4] transition duration-150" href="/passport">Passport</a>
                        <a class="text-gray-600 hover:text-[#6daba4] transition duration-150" href="/map">New Stamp</a>
                        <a class="text-gray-600 hover:text-[#6daba4] transition duration-150" href="/history">History</a>
                        <a class="text-gray-600 hover:text-[#6daba4] transition duration-150" href="/plan">AI Planner</a>
                                                
                        <!-- Logout -->
                        <a class="text-[#885C45] hover:text-red-700 transition duration-150" href="/logout">Log Out</a>
                    
                    {% else %}
                        
                        <!-- Logged Out Links -->
                        <a class="text-gray-600 hover:[#6daba4] transition duration-150" href="/register">Register</a>
                        <a class="text-gray-600 hover:[#6daba4] transition duration-150" href="/login">Log In</a>
                    
                    {% endif %}
                </div>
            </div>
        </nav>

        <!-- Flash Messages (Styled with Tailwind) -->
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <header class="w-full">
                    <div id="flash-message" class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 text-center" role="alert">
                        {{ messages | join(" ") }}
                    </div>
                </header>

                <script>
                    document.addEventListener("DOMContentLoaded", function() {
                        setTimeout(function() {
                            const flash = document.getElementById("flash-message");
                            if (flash) {
                                flash.style.transition = "opacity 1s ease";
                                flash.style.opacity = "0";
                                setTimeout(() => flash.remove(), 1000);
                            }
                        }, 8000);
                    });
                </script>
            {% endif %}
        {% endwith %}

        

        <!-- Main Content Area -->
        <main class="flex-grow p-5 md:p-10 flex flex-col items-center">
            {% block main %}{% endblock %}
        </main>

        <!-- Footer -->
        <footer class="mt-auto border-t border-[#885C45] py-3 w-full bg-white">
            <div class="text-center text-sm text-[#885C45]">
                &copy; 2025 Federico Montalbán López for CS50
            </div>
        </footer>

    </body>

</html>

